<?php
$control=Router::getController();

echo "<script type='text/javascript'>";
if(@$save && isset($grdcontrol))
    echo " window.opener.recargargrd$grdcontrol();";
if(@$exit)
    echo " window.close();";
echo "</script>";
?>
<table width="100%" class=" ui-widget-header ui-corner-all" style="margin-bottom:5px;">
<tr>
    <td >
        <div style="width: 100%; height: auto;" >
            <table cellspacing="2" cellpadding="0">
                    <tr>
                        <td><button type="button" title="Seleccionar" class="ui-state-default ui-corner-all button_toolbar" id="btnselect" ></button></td>
                        <td><button type="button" title="Seleccionar &amp; salir" class="ui-state-default ui-corner-all button_toolbar" id="btnselectexit" ></button></td>
                        <td class="bc_separator_show">
                            <div style="border-left: 1px solid rgb(108, 120, 121); width: 1px; height: 30px;"> </div>
                        </td>
                        <td><button type="button" title="Recargar" class="ui-state-default ui-corner-all button_toolbar" id="btnrfrsh"></button></td>
                    </tr>
            </table>
        </div>
    </td>
</tr>
</table>
<?php echo View::getContent();?>
<script type="text/javascript">
    
    $(function(){

        $(".button_toolbar").click(function(){
            var $form=$("form").get(0);
            var gr = jQuery("#grd<?php echo $control?>").jqGrid('getGridParam','selrow');
            
            switch($(this).attr("id")){
                case 'btnselect':
                    
                    if( gr != null){
                        $($form).attr("action",$($form).attr("action")+"/"+gr)
                       $($form).submit();
                    }
                    else
                        alert("Seleccione una fila");
                    break;
                 case 'btnselectexit':
                    
                    if( gr != null){
                        $($form).attr("action",$($form).attr("action")+"/"+gr+"?exit=1")
                       $($form).submit();
                    }
                    else
                        alert("Seleccione una fila");
                    
                    break;
                case 'btnrfrsh':
                    window.location.reload();
                    break;
            }
        });
    });

</script>